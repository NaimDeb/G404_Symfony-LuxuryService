{% extends 'base.html.twig' %}

{% block base_url %}http://www.fgtechs.fr/z-pedro/wwwluxuryservices{% endblock %}
{% block csrf_token %}9Tnm0YBCxgVTxoqI1HzccsU5NuE9RughZmhpzgXn{% endblock %}
{% block favicon %}assets/img/ico/fav.png{% endblock %}

{% block style %}
    <style>
        select {
            display: block!important;
        }

        .tp-caption.boxshadow, 
            .boxshadow {
                box-shadow: none !important
        }
        
    </style>
{% endblock %}

{% block body %}

    <!-- Page -->
    <div class="page">
    {% include "partials/flash.html.twig" %}

    <!-- Page Header-->
    <section class="page-title page-title-bg fixed-bg overlay dark-5 padding-top-160 padding-bottom-80">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2 class="white-text">Your profile</h2>
                    <span class="white-text">Personnal & Professionnal informations</span>
                    <ol class="breadcrumb">
                        <li><a href="#!">Home</a></li>
                        <li class="active">Profile</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- Page Content-->
    <section class="gray-bg">
        <div class="container">
            <div class="row">
                <div class="score-container">

                    {% if completionRate == 100 %}
                    <h4>
                        <img src="https://i.imgur.com/s9bPVaK.gif" style="height: 80px; width: 201px;"> &nbsp;
                        &nbsp; Hooray ! Your profile is complete.
                    </h4>
                    {% else %}
                    <h4>
                        &nbsp; Your profile is {{completionRate}}% complete, you can complete it by adding more information.
                    </h4>
                    {% endif %}
                    <div class="c100 p{{completionRate}}
                    small complete ">
                        <span>{{completionRate}}%</span>
                        <div class="slice">
                            <div class="bar"></div>
                            <div class="fill"></div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </section>

        {# Candidate Form Start #}
        {{ form_start(candidateForm, 
        {'attr': {'id': 'candidateForm', 'role': 'form', 'enctype': 'multipart/form-data'}
        
        
        })
        }}
        {{ form_errors(candidateForm) }}
    <section class="section-padding">
        <div class="container">
            <div class="row">
                <h3 class="text-extrabold">Your personal informations</h3>
                {# Gender Field #}
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="input-field">
                        {{ form_widget(candidateForm.gender) }}
                        {{ form_label(candidateForm.gender)}}
                    </div>
                </div>
                <div class="clearfix visible-sm"></div>
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="input-field">
                        {# First Name Field #}
                        {{ form_widget(candidateForm.firstName) }}
                        {{ form_label(candidateForm.firstName, 'First name') }}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="input-field">
                        {# Last Name Field #}
                        {{ form_widget(candidateForm.lastName) }}
                        {{ form_label(candidateForm.lastName, 'Last name') }}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="input-field">
                        {# Current Location Field #}
                        {{ form_widget(candidateForm.currentLocation) }}
                        {{ form_label(candidateForm.currentLocation, 'Current location') }}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-8">
                    <div class="input-field">
                        {# Address Field #}
                        {{ form_widget(candidateForm.address) }}
                        {{ form_label(candidateForm.address, 'Address') }}
                    </div>
                </div>
            </div>
            <div class="row">
            {# Profile Picture #}
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="file-field input-field" style="margin-top: 32px;">
                        <div class="btn btn-lg primary waves-effect waves-light">
                            <span><i class="material-icons">insert_photo</i> Photo</span>
                            {{ form_widget(candidateForm.profilePictureFile) }}
                        </div>
                        {# {{ if app.user.candidate.profilePictureFilename }} #}
                        {% if app.user.candidate is not null and app.user.candidate.profilePicture is not null %}
                        <div class="existing-file">
                            <a href="{{ asset('uploads/profile_pictures/' ~ candidate.profilePicture)}}" target="_blank"><i class="material-icons">&#xE24D;</i> {{ candidate.profilePicture }}  </a>
                        </div>
                        {% endif %}
                        {# {{ endif }} #}
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text" placeholder="Upload your ID photo" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-8">
                {# Country #}
                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="input-field">
                                {# Country Field #}
                                {{ form_widget(candidateForm.country) }}
                                {{ form_label(candidateForm.country, 'Country') }}
                            </div>
                        </div>
                {# Nationality #}
                        <div class="col-xs-12 col-sm-6">
                            <div class="input-field">
                                {# Nationality Field #}
                                {{ form_widget(candidateForm.nationality) }}
                                {{ form_label(candidateForm.nationality, 'Nationality') }}
                            </div>
                        </div>
                {# Birth Date #}
                        <div class="col-xs-12 col-sm-6">
                            <div class="input-field">
                                {# Birth Date Field #}
                                {{ form_widget(candidateForm.birthDate) }}
                                {{ form_label(candidateForm.birthDate, 'Birthdate') }}
                            </div>
                        </div>
                {# Place of Birth #}
                        <div class="col-xs-12 col-sm-6">
                            <div class="input-field">
                                {# Place of Birth Field #}
                                {{ form_widget(candidateForm.placeOfBirth) }}
                                {{ form_label(candidateForm.placeOfBirth, 'Birthplace') }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {# FILES #}
            <div class="row mt-40">
                <h3 class="text-extrabold">Your professional profile</h3>

                {# Passport #}
                <div class="col-xs-12 col-sm-6">
                    <div class="card card-panel passport">

                    
                        <div class="file-field input-field">
                            <div class="btn btn-lg primary waves-effect waves-light">
                                <span><i class="material-icons">&#xE24D;</i> Passport</span>
                                {{ form_widget(candidateForm.passportFile) }}
                                {{ form_errors(candidateForm.passportFile) }}

                            </div>
                            {% if app.user.candidate is not null and app.user.candidate.passport is not null %}
                            <div class="existing-file">
                                <a href="{{ asset('uploads/passport_files/' ~ candidate.passport)}}" target="_blank"><i class="material-icons">&#xE24D;</i> {{ candidate.passport }}  </a>
                            </div>
                            {% endif %}
                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Upload your passport" readonly>
                            </div>
                        </div>

                {# CV #}

                        <div class="file-field input-field">
                            <div class="btn btn-lg primary waves-effect waves-light">
                                <span><i class="material-icons">&#xE24D;</i> CV</span>
                                {{ form_widget(candidateForm.curriculumVitaeFile) }}
                                {{ form_errors(candidateForm.curriculumVitaeFile) }}
                            </div>

                            {% if app.user.candidate is not null and app.user.candidate.curriculumVitae is not null %}
                            <div class="existing-file">
                                <a href="{{ asset('uploads/cv_files/' ~ candidate.curriculumVitae)}}" target="_blank"><i class="material-icons">&#xE24D;</i> {{ candidate.curriculumVitae }}  </a>
                            </div>
                            {% endif %}


                            <div class="file-path-wrapper">
                                <input class="file-path validate" type="text" placeholder="Upload your Curriculum Vitae" readonly>
                            </div>
                        </div>
                    </div>
                </div>

            {# Job category #}
                <div class="col-xs-12 col-sm-6">
                    <div class="col-xs-12 col-sm-12">
                        <div class="input-field" style="margin-top: 5px;">
                            {# Job Category Field #}
                            {{ form_widget(candidateForm.jobCategory) }}
                            {{ form_label(candidateForm.jobCategory)}}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-12">
                        <div class="input-field">
                            {# Experience Field #}
                            {{ form_widget(candidateForm.experience) }}
                            {{ form_label(candidateForm.experience, 'Experience', {'label_attr': {'class': 'active'}}) }}
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-12">
                        <div class="input-field">
                            {# Availability Field #}
                            {{ form_widget(candidateForm.availibility) }}
                            {{ form_label(candidateForm.availibility) }}
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-12">
                    <div class="input-field">
                        {# Short Description Field #}
                        {{ form_widget(candidateForm.shortDescription) }}
                        {{ form_label(candidateForm.shortDescription, 'Short description for your profile, as well as more personnal informations (e.g. your hobbies/interests ). You can also paste any link you want.') }}
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="section-padding gray-bg">
        <div class="container">
            <div class="row">
                <h3 class="text-extrabold">Your Luxury account</h3>
                <div class="col-xs-12 col-sm-4">
                    <div class="input-field">
                        {# Email Field #}
                        {{ form_widget(candidateForm.email) }}
                        {{ form_label(candidateForm.email, 'Email') }}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-4">
                    <div class="input-field">
                        {# Password Field #}
                        {{ form_widget(candidateForm.newPassword.first) }}
                        {{ form_label(candidateForm.newPassword.first, 'Change your password here') }}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-4">
                    <div class="input-field">
                        {# Password Repeat Field #}
                        {{ form_widget(candidateForm.newPassword.second) }}
                        {{ form_label(candidateForm.newPassword.second, 'Confirm your new password') }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 mt-40 mb-80 delete-account">
                    <a href="{{ path('delete_account') }}" onclick="return prompt('Please Type \'Delete my account\' to delete your K-Yachting Services account:') == 'Delete my account'" class="btn btn-block btn-lg waves-effect waves-light"><i class="material-icons">&#xE872;</i>Delete my account</a>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-4">
                    <a href="{{ path('app_home') }}" class="btn btn-block btn-lg border primary waves-effect waves-light"><i class="fa fa-long-arrow-left"></i> Back home</a>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-4 col-md-offset-4">
                    <button type="submit" class="btn btn-block btn-lg gradient secondary waves-effect waves-light">
                        <span><strong>UPDATE</strong> NOW</span>
                    </button>
                </div>
            </div>
        </div>
    </section>
    {# Candidate Form End #}
{{ form_end(candidateForm) }}

    </div>
{% endblock %}

{% block deferscripts %}{% endblock %}
